<form [formGroup]="form" class="grid col-12 p-fluid p-formgrid">
    <div class="grid">
        <div class="col-12">
            <p-toast></p-toast>
            <div class="card">

                <div class=" grid">


                    <div class="field col-12 md:col-6">
                        <label>Nombre:</label>
                        <input #nombreInput type="text" autofocus class="p-inputtext" [ngClass]="{'ng-invalid ng-dirty': submitted && form.controls['paqe_Descripcion'].invalid}" formControlName="paqe_Descripcion" formControlName="paqe_Descripcion">
                        <small class="ng-dirty ng-invalid"
                        *ngIf="submitted && form.controls['paqe_Descripcion'].invalid"
                        style="color: red !important;">Nombre Requerido</small>
                  
                    </div>
                    <div class="field col-12 md:col-6">
                        <label>Precio:</label>
                        <input #precioInput type="text" class="p-inputtext" [ngClass]="{'ng-invalid ng-dirty': submitted && form.controls['paqe_Precio'].invalid}" formControlName="paqe_Precio">
                        <small class="ng-dirty ng-invalid"
                        *ngIf="submitted && form.controls['paqe_Precio'].invalid"
                        style="color: red !important;">Precio Requerido</small>
                    </div>
                    <div class="field col-12 md:col-6">
                        <label>Imagen</label>
                        <p-fileUpload #fileUpload name="demo[]" [mode]="'basic'" (onSelect)="onUpload($event)"
                            [multiple]="false" accept="image/*" [maxFileSize]="1000000"
                            chooseLabel="{{ showFileUpload ? 'Seleccione' : '' }}">
                        </p-fileUpload>

                    </div>

                </div>
                <div class="justify-content-center ms-5">
                    <div class="text-center">
                        <p-image *ngIf="selectedImageURL" [src]="selectedImageURL" alt="Imagen seleccionada" width="250"
                            [preview]="true"></p-image>

                    </div>
                </div>
                <div class="grid p-justify-end">
                    <div class="col">
                        <button pButton pRipple type="button" label="Volver" icon="pi pi-times"
                            class="p-button-rounded p-button-secondary mt-4" (click)="Volver()"></button>


                    </div>
                </div>


                <div class="card">
                    <h3>Seleccione</h3>
                    <span class="p-buttonset">
                        <button pButton pRipple label="Alimentos" icon="pi pi-check"
                            (click)="onTabClick('Alimentos','A')"></button>
                        <button pButton pRipple label="Bebidas" icon="local_drink"
                            (click)="onTabClick('Bebidas','B')"></button>
                        <button pButton pRipple label="Complementos" icon="pi pi-cubes"
                            (click)="onTabClick('Complementos','C')"></button>
                        <button pButton pRipple label="Postres" icon="pi pi-birthday-cake"
                            (click)="onTabClick('Postres','P')"></button>
                    </span>
                    <div class="mt-3">

                    </div>
                    <div *ngIf="activeTab === 'Alimentos'" class="mt-3">
                        <p-dataView #dv [value]="alimentos" [paginator]="true" [rows]="9" filterBy="alim_Descripcion"
                            [sortField]="sortField" [sortOrder]="sortOrder" layout="grid">
                    
                            <ng-template pTemplate="header">
                                <div class="flex flex-column md:flex-row md:justify-content-between gap-2">
                                    <p-dropdown [options]="sortOptions" placeholder="Ordenar Por Precio"
                                        (onChange)="onSortChange($event)"></p-dropdown>
                                    <span class="p-input-icon-left">
                                        <i class="pi pi-search"></i>
                                        <input type="search" pInputText placeholder="Buscar"
                                            (input)="onFilter(dv, $event)">
                                    </span>
                                </div>
                            </ng-template>
                    
                            <ng-template let-alimentos pTemplate="gridItem">
                                <div class="grid grid-nogutter">
                                    <div class="col-12 md:col-4" *ngFor="let alim of alimentos">
                                        <div class="card m-3 border-1 surface-border"
                                            style="background-color: #E2E2E2;">
                                            <div
                                                class="flex flex-wrap gap-2 align-items-center justify-content-between mb-2">
                                                <div class="flex align-items-center">
                                                    <!-- Contador de cantidad -->
                                                 
                                                    <div class="flex gap-2 align-items-center">
                                                        <p-button icon="pi pi-minus-circle" (click)="decrementarCantidad(alim.alim_Id)" severity="danger"></p-button>
                                                        <label>{{ cantidadSeleccionadaPorAlimento[alim.alim_Id] || 0 }}</label>
                                                        <p-button icon="pi pi-plus-circle" (click)="incrementarCantidad(alim.alim_Id)" severity="success"></p-button>
                                                      </div>
                                                    
                                                </div>
                                            </div>
                                            <div class="flex flex-column align-items-center text-center mb-3">
                                                <img [src]="'https://localhost:44332/uploads/' + alim.alim_Imagen"
                                                    [alt]="alim.alim_Imagen" width="100" height="100"
                                                    class="w-9 shadow-2 my-3 mx-0" />
                                                <input type="hidden" formControlName="prod_Id" [value]="alim.alim_Id">
                                                <div class="font-bold" style="font-size: 18px;">{{alim.alim_Descripcion}}</div>
                                            </div>
                                            <div class="flex align-items-center justify-content-between">
                                                <span class="font-semibold" style="font-size: 15px;">${{alim.alim_Precio}}</span>
                                                <p-button icon="pi pi-plus-circle" (click)="guardar(alim.alim_Id)"></p-button>
                                                
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </p-dataView>
                    </div>
                    
                    


                    <div *ngIf="activeTab === 'Postres'" class="mt-3">
                        <p-dataView #dv [value]="postres" [paginator]="true" [rows]="9" filterBy="post_Descripcion"
                            [sortField]="sortField" [sortOrder]="sortOrder" layout="grid">

                            <ng-template pTemplate="header">
                                <div class="flex flex-column md:flex-row md:justify-content-between gap-2">
                                    <p-dropdown [options]="sortOptionsP" placeholder="Ordenar Por Precio"
                                        (onChange)="onSortChange($event)"></p-dropdown>
                                    <span class="p-input-icon-left">
                                        <i class="pi pi-search"></i>
                                        <input type="search" pInputText placeholder="Buscar"
                                            (input)="onFilter(dv, $event)">
                                    </span>
                                </div>
                            </ng-template>

                            <ng-template let-postres pTemplate="gridItem">
                                <div class="grid grid-nogutter">
                                    <div class="col-12 md:col-4" *ngFor="let post of postres">
                                        <div class="card m-3 border-1 surface-border"
                                            style="background-color: #E2E2E2;">
                                            <div
                                            class="flex flex-wrap gap-2 align-items-center justify-content-between mb-2">
                                            <div class="flex align-items-center">
                                                <!-- Contador de cantidad -->
                                             
                      
                                                <div class="flex gap-2 align-items-center">
                                                    <p-button icon="pi pi-minus-circle" (click)="decrementarCantidad(post.post_id)" severity="danger"></p-button>
                                                    <label>{{ cantidadSeleccionadaPorAlimento[post.post_id] || 0 }}</label>
                                                    <p-button icon="pi pi-plus-circle" (click)="incrementarCantidad(post.post_id)" severity="success"></p-button>
                                                  </div>
                                                
                                                
                                            </div>
                                        </div>
                                            <div class="flex flex-column align-items-center text-center mb-3">
                                                <img [src]="'https://localhost:44332/uploads/' + post.post_Imagen"
                                                    [alt]="post.post_Imagen" width="100" height="100"
                                                    class="w-9 shadow-2 my-3 mx-0" />
                                                <div class="font-bold" style="font-size: 18px;">{{post.post_Descripcion}}</div>
                                            </div>
                                            <div class="flex align-items-center justify-content-between">
                                                <span class="font-semibold" style="font-size: 15px;">${{post.post_Precio}}</span>
                                                <p-button icon="pi pi-plus-circle"  (click)="guardar(post.post_id)"></p-button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </p-dataView>
                    </div>

                    <div *ngIf="activeTab === 'Complementos'" class="mt-3">
                        <p-dataView #dv [value]="complementos" [paginator]="true" [rows]="9" filterBy="comp_Descripcion"
                            [sortField]="sortField" [sortOrder]="sortOrder" layout="grid">

                            <ng-template pTemplate="header">
                                <div class="flex flex-column md:flex-row md:justify-content-between gap-2">
                                    <p-dropdown [options]="sortOptionsC" placeholder="Ordenar Por Precio"
                                        (onChange)="onSortChange($event)"></p-dropdown>
                                    <span class="p-input-icon-left">
                                        <i class="pi pi-search"></i>
                                        <input type="search" pInputText placeholder="Buscar"
                                            (input)="onFilter(dv, $event)">
                                    </span>
                                </div>
                            </ng-template>

                            <ng-template let-complementos pTemplate="gridItem">
                                <div class="grid grid-nogutter">
                                    <div class="col-12 md:col-4" *ngFor="let comp of complementos">
                                        <div class="card m-3 border-1 surface-border"
                                            style="background-color: #E2E2E2;">
                                            <div
                                            class="flex flex-wrap gap-2 align-items-center justify-content-between mb-2">
                                            <div class="flex align-items-center">
                                                <!-- Contador de cantidad -->
                     
                                                <div class="flex gap-2 align-items-center">
                                                    <p-button icon="pi pi-minus-circle" (click)="decrementarCantidad(comp.comp_Id)" severity="danger"></p-button>
                                                    <label>{{ cantidadSeleccionadaPorAlimento[comp.comp_Id] || 0 }}</label>
                                                    <p-button icon="pi pi-plus-circle" (click)="incrementarCantidad(comp.comp_Id)" severity="success"></p-button>
                                                  </div>
                                                
                                                
                                            </div>
                                        </div>
                                            <div class="flex flex-column align-items-center text-center mb-3">
                                                <img [src]="'https://localhost:44332/uploads/' + comp.comp_Imagen"
                                                    [alt]="comp.comp_Imagen" width="100" height="100"
                                                    class="w-9 shadow-2 my-3 mx-0" />
                                                <div class="font-bold" style="font-size: 18px;">{{comp.comp_Descripcion}}</div>
                                            </div>
                                            <div class="flex align-items-center justify-content-between">
                                                <span class="font-semibold" style="font-size: 15px;">${{comp.comp_Precio}}</span>
                                                <p-button icon="pi pi-plus-circle" (click)="guardar(comp.comp_Id)"></p-button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </p-dataView>
                    </div>

                    <div *ngIf="activeTab === 'Bebidas'" class="mt-3">
                        <p-dataView #dv [value]="bebidas" [paginator]="true" [rows]="9" filterBy="bebi_Descripcion"
                            [sortField]="sortField" [sortOrder]="sortOrder" layout="grid">

                            <ng-template pTemplate="header">
                                <div class="flex flex-column md:flex-row md:justify-content-between gap-2">
                                    <p-dropdown [options]="sortOptionsB" placeholder="Ordenar Por Precio"
                                        (onChange)="onSortChange($event)"></p-dropdown>
                                    <span class="p-input-icon-left">
                                        <i class="pi pi-search"></i>
                                        <input type="search" pInputText placeholder="Buscar"
                                            (input)="onFilter(dv, $event)">
                                    </span>
                                </div>
                            </ng-template>

                            <ng-template let-bebidas pTemplate="gridItem">
                                <div class="grid grid-nogutter">
                                    <div class="col-12 md:col-4" *ngFor="let bebi of bebidas">
                                        <div class="card m-3 border-1 surface-border"
                                            style="background-color: #E2E2E2;">
                                            <div
                                                class="flex flex-wrap gap-2 align-items-center justify-content-between mb-2">
                                                <div class="flex align-items-center">
                                                                              
                                
                                                    <div class="flex gap-2 align-items-center">
                                                        <p-button icon="pi pi-minus-circle" (click)="decrementarCantidad(bebi.bebi_Id)" severity="danger"></p-button>
                                                        <label>{{ cantidadSeleccionadaPorAlimento[bebi.bebi_Id] || 0 }}</label>
                                                        <p-button icon="pi pi-plus-circle" (click)="incrementarCantidad(bebi.bebi_Id)" severity="success"></p-button>
                                                      </div>
                                                
                                                </div>
                                            </div>
                                            <div class="flex flex-column align-items-center text-center mb-3">
                                                <img [src]="'https://localhost:44332/uploads/' + bebi.bebi_Imagen"
                                                    [alt]="bebi.bebi_Imagen" width="100" height="100"
                                                    class="w-9 shadow-2 my-3 mx-0" />
                                                <div class="font-bold" style="font-size: 18px;">{{bebi.bebi_Descripcion}}</div>
                                            </div>
                                            <div class="flex align-items-center justify-content-between">
                                                <span class="font-semibold" style="font-size: 15px;">${{bebi.bebi_Precio}}</span>
                                                <p-button icon="pi pi-plus-circle"  (click)="guardar(bebi.bebi_Id)"></p-button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </ng-template>
                        </p-dataView>
                    </div>

                </div>



            </div>
        </div>
    </div>

</form>